# Data Model: RAG Knowledge Ingestion & Vector Indexing

## Entity: Content Chunk
**Description**: A segment of processed text from the Docusaurus documentation, including the original text and metadata
**Fields**:
- `id` (string): Unique identifier for the chunk
- `content` (string): The actual text content of the chunk
- `source_url` (string): URL of the original Docusaurus page
- `document_title` (string): Title of the original document
- `chunk_position` (integer): Position of this chunk within the original document
- `metadata` (object): Additional metadata including headings, section info
- `created_at` (timestamp): When the chunk was created
- `updated_at` (timestamp): When the chunk was last updated

**Validation Rules**:
- Content must not exceed 1500 words
- Source URL must be a valid Docusaurus page URL
- Chunk position must be non-negative integer

## Entity: Embedding Vector
**Description**: A numerical representation of a content chunk generated by the Cohere model, stored in Qdrant Cloud
**Fields**:
- `chunk_id` (string): Reference to the Content Chunk ID
- `vector` (array[float]): The embedding vector (1024 dimensions for Cohere)
- `source_url` (string): URL of the original source
- `document_title` (string): Title of the original document
- `chunk_position` (integer): Position within original document
- `embedding_model` (string): Name of the model used (e.g., "cohere/embed-english-v3.0")
- `created_at` (timestamp): When the embedding was generated

**Validation Rules**:
- Vector must have exactly 1024 dimensions (for Cohere model)
- Chunk_id must reference an existing Content Chunk
- Embedding model must be one of approved models

## Entity: Source Document
**Description**: A reference to the original Docusaurus page from which content was extracted, including URL and document structure information
**Fields**:
- `url` (string): The unique URL of the Docusaurus page
- `title` (string): The title of the document
- `last_crawled_at` (timestamp): When the page was last crawled
- `crawl_status` (string): Status of the last crawl (success, error, skipped)
- `content_hash` (string): Hash of the content to detect changes
- `metadata` (object): Additional metadata like headings, word count, etc.
- `created_at` (timestamp): When the document was first discovered
- `updated_at` (timestamp): When the record was last updated

**Validation Rules**:
- URL must be a valid Docusaurus page URL
- Title must not be empty
- Crawl status must be one of: success, error, skipped

## Entity: Search Result
**Description**: A set of relevant content chunks returned by the similarity search, ranked by relevance to the query
**Fields**:
- `query` (string): The original search query
- `results` (array): List of matching content chunks with relevance scores
- `search_metadata` (object): Information about the search (time taken, number of candidates checked)
- `created_at` (timestamp): When the search was performed

**Validation Rules**:
- Query must not be empty
- Results array must not exceed 10 items by default
- Each result must include a relevance score between 0 and 1

## Relationships
- One Source Document can generate many Content Chunks (1 to many)
- One Content Chunk maps to one Embedding Vector (1 to 1)
- Search Results reference multiple Content Chunks (many to many, via results array)

## State Transitions
- Source Document: discovered → crawled → processed → indexed
- Content Chunk: extracted → chunked → embedded → searchable